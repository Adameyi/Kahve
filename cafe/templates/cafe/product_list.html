{% load static %}
  {% for product in products %}
  <!--Products-->
  <div class="col-md-3 products-container" data-category="{{ product.category }}">
    <div class="coffeeBrown custom-shadow product position-relative rounded-5 p-4 text-white">
      <h3 class="mb-0">${{ product.price }}</h3>
      <p>{{ product.name }}</p>
      <div class="mt-5">
        {% if product.image %}
        <img class="mt-5 h-50  rounded position-absolute start-50 translate-middle img-fluid"
          src="{{product.image.url}}" alt="{{ product.name }}">
        {% else %}
        <img class="mt-5 position-absolute start-50 translate-middle img-fluid"
          src="{% static 'coffeePlaceholder.png' %}" alt="{{ product.name }}">
        {% endif %}
      </div>
      <!-- Favourite Button -->
      <form action="{% url 'favourite_product' product_id=product.id %}" method="post">
        {% csrf_token %}
        <button
          class="mt-3 me-3 custom-shadow peptoPink rounded-circle position-absolute top-0 end-0 text-white d-flex justify-content-center align-items-center"
          style="width: 50px; height: 50px;">
          {% if product.favourited %}
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="text-warning" fill="currentColor"
            style="height: 30px; width: 30px;">
            <path
              d="m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z" />
          </svg>
          {% else %}
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="coffeeBrownText" fill="currentColor"
            style="height: 30px; width: 30px;">
            <path
              d="m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z" />
          </svg>
          {% endif %}
        </button>
      </form>
      <!---->

      <!-- Add Button -->
      <button data-bs-toggle="modal" data-bs-target="#productModal{{ product.id }}"
        class="peptoPink addButton position-absolute bottom-0 end-0 text-white d-flex justify-content-center align-items-center"
        style="width: 50px; height: 50px;">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
          class="w-75 h-75">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
        </svg>
      </button>
      <!---->
    </div>
    <div class="position-relative rounded-5 p-3 text-white">
    </div>
  </div>



<!-- Add Product Modal -->
<div class="modal fade" id="productModal{{ product.id }}" tabindex="-1" aria-labelledby="productModalLabel"
  aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content modal-product rounded-5 mx-auto darkCoffeeBrown">
      <button type="button" class="position-absolute m-3 no-decoration text-white" data-bs-dismiss="modal"
        aria-label="Close">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
          style="width:30px; height:30px;">
          <path fill-rule="evenodd"
            d="M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z"
            clip-rule="evenodd" />
        </svg>
      </button>
      {% if product.image %}
      <img class="start-50 translate-middle img-fluid" src="{{product.image.url}}" alt="{{ product.name }}">
      {% else %}
      <img class="img-fluid rounded-5" src="{% static 'images/mainPlaceholder.png' %}" alt="{{ product.name }}">
      {% endif %}

      <div class="modal-body text-white subtotalText">
        <!-- Favourite Button -->
        <form action="{% url 'favourite_product' product.id %}">
          <button
            class="mt-3 me-3 custom-shadow peptoPink rounded-circle position-absolute top-0 end-0 text-white d-flex justify-content-center align-items-center"
            style="width: 35px; height: 35px;">
            {% if product.favourited %}
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="text-warning" fill="currentColor"
              style="height: 20px; width: 20px;">
              <path
                d="m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z" />
            </svg>
            {% else %}
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="coffeeBrownText" fill="currentColor"
              style="height: 20px; width: 20px;">
              <path
                d="m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z" />
            </svg>
            {% endif %}
          </button>
        </form>
        <!---->
        <span class="inria-serif-regular">{{ product.name }}</span>

        <!-- Star Rating -->
        <fieldset>
          <div class="d-flex align-items-center">
            <span class="star-cb-group">
              <input type="radio" id="rating-5_{{product.id}}" name="rating" value="5" /><label
                for="rating-5_{{product.id}}">5</label>
              <input type="radio" id="rating-4_{{product.id}}" name="rating" value="4" checked="checked" /><label
                for="rating-4_{{product.id}}">4</label>
              <input type="radio" id="rating-3_{{product.id}}" name="rating" value="3" /><label
                for="rating-3_{{product.id}}">3</label>
              <input type="radio" id="rating-2_{{product.id}}" name="rating" value="2" /><label
                for="rating-2_{{product.id}}">2</label>
              <input type="radio" id="rating-1_{{product.id}}" name="rating" value="1" /><label
                for="rating-1_{{product.id}}">1</label>
              <input type="radio" id="rating-0_{{product.id}}" name="rating" value="0" class="star-cb-clear" /><label
                for="rating-0_{{product.id}}">0</label>
            </span>
            <span class="ms-2">4.0</span> <!-- Adjust margin-left (ms) as needed -->
          </div>
        </fieldset>
        <!---->
        <p class="smallText lh-sm mt-0">{{ product.description }}</p>

        <!-- Drink Sizes -->
        <div class="btn-group text-white mb-3 w-75 d-flex justify-content-center" data-toggle="buttons">
          <input type="radio" id="1_{{product.id}}" name="test-toggle" checked="checked">
          <label for="1_{{product.id}}" class="btn btn-default-toggle-ghost active">
            Delivery
          </label>
          <input type="radio" id="2_{{product.id}}" name="test-toggle">
          <label for="2_{{product.id}}" class="btn btn-default-toggle-ghost active">
            Pickup
          </label>
        </div>
        <!---->

        <!-- Milk Types -->
      </div>
      <form action="{% url 'buy_product' product_id=product.id%}" id="addToCartForm" method="POST">
        {% csrf_token %}
        <button type="submit" class="btn w-50 ms-auto peptoPink" data-bs-toggle="offcanvas" data-bs-target="#cartOffcanvas">Add Product</button>
      </form>
    </div>
  </div>
</div>
{% endfor %}